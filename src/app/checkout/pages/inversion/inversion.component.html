<app-minutero></app-minutero>

<div  *ngIf="!resolucion_movil" class = "p-5" style="padding-top: 150px!important">
  <app-actualroute></app-actualroute>
  <form [formGroup]="formInversion" (ngSubmit)="submit()">
    <div class="row mt-5">
      <div class="col-12 col-lg-6">
        <div class="row mb-3">
          <div class="col-12 col-lg-8 offset-0 offset-lg-4">
            <p class="fw-bold fs-3 font-black font-lato text-3x1">
              Empieza hoy mismo!
            </p>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-12 col-lg-8 offset-lg-4">
            <p class="font-weight-light text-muted fs-6">
              Escoge tu mejor opción de pago e inicia tu camino
              comoinversionista en LOKL.
            </p>
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-lg-8 offset-0 offset-lg-4">
            <label for="exampleInputEmail1" class="form-label text-muted">¿Cuánto quieres invertir?</label>
            <div class= "border input-group rounded-0" [ngClass] = "{'input-selected': inputActivated}">
              <input type="text" class="form-control form-control-lg rounded-0 border-0 col-10" formControlName="value" onlyNumber
                (focus)="inputFocus()" (blur) = "inputBlur()" (input)="inputValue()" placeholder="$0" />
              <div class = "d-flex justify-content-center input-group-append col-2" style = "border-left: 1px solid #f1f1f1!important">
                <div class="d-flex flex-column input-group-text border-0 align-center p-2" style = "background-color: transparent!important; ">
                  <p class = "m-0 fw-heavy fs-7">
                    {{currentUnits}}
                  </p>
                  <p class = "text-muted fs-8 m-0" style = "position: absolute; bottom: 4px">units</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-lg-8 offset-0 offset-lg-4">
            <div class="d-flex justify-content-between mt-3 container-cuotas">
              <app-custom-select [data]="opcionesSelect"
                (onOpcionSeleccionada)="changeDues($event)"
                [$selectSelected]="$selectSelected"></app-custom-select>

              <div class="border pago-unico p-2 text-center align-items-center" [ngClass]="{
                  'pago-unico-selected': pagoUnicoSelected
                }" (click)="clickPagoUnico()">
                <p class="fs-6 mb-0">Pago unico</p>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-lg-8 offset-0 offset-lg-4">
            <hr class="mt-5 mb-5" />
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-12 col-lg-8 offset-0 offset-lg-4 align-items-center">

            <p-carousel [value]="cardData" [numVisible]="1"  [circular]="false" [showIndicators]="false" [showNavigators]="false" #carouselP>
              <ng-template let-item pTemplate="item">
                 <app-card [data] = "item" ></app-card>
              </ng-template>
            </p-carousel>


            <button class = "splide-arrow btn-izq" style = "background-color: transparent; width: 100px; left: -60px;" type = "button" (click) = "anteriorTarjeta()">
              <img src="/assets/icon/arrow-left.svg" alt="">
            </button>
            <button class = "splide-arrow btn-der" style = "background-color: transparent; width: 100px; right: -60px;" type = "button" (click) = "proximaTarjeta()">
              <img src="/assets/icon/arrow-rigth.svg" alt="">
            </button>


          </div>
        </div>

        <div class="row">
          <div class="col-12 col-lg-8 offset-0 offset-lg-4">
            <p class="fs-3 fw-bold">Selecciona tu método de pago</p>

            <p class="fs-6 mt-4">
              <strong>Recuerda:</strong> Qué el pago con tarjeta de crédito
              puede tener fees adicionales dentro de tu inversión.
            </p>

            <div class="mt-3 mb-4">
              <app-card-payment *ngFor="let card of paymentCards" [payment]="card.name" [selected]="card.selected"
                (click)="activateCard(card.name)"></app-card-payment>

              <input hidden type="checkbox" value="visa" />
              <input hidden type="checkbox" value="pse" />
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-lg-8 offset-0 offset-lg-4">
            <div class="d-flex justify-content-between auth mb-5">
              <mat-checkbox color="primary" class="check-auth" formControlName="acceptTerms">
              </mat-checkbox>

              <div class="ml-2" (click)="clickAuth()">
                Al realizar el pago, apruebas el débito automático a tu medio de
                pago y aceptas que tu suscripción será de inmediato. Aceptas
                recibir notificaciones y aceptas las Políticas de privacidad de
                LOKL. Además te cobraremos el cargo mensual o anual estándar de
                forma recurrente según tu método de pago registrado.
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-4 col-lg-4 offset-lg-2 ml-4 d-none d-sm-none d-md-none d-lg-block">
        <div class="img-prom fs-6 fw-heavy">
          Estás a un paso <br/>
          de obtener más beneficios <br/>
          invirtiendo $28.000.000
        </div>

        <div class="mt-3 border border-1 rounded-1 p-4">
          <p class="fs-4 fw-bold">Resumen de inversión</p>
          <p class="fw-light">
            Orden de inversión: <strong> {{ fecha | date }} </strong>
          </p>

          <hr />

          <p class="fs-6 mb-5 col-gray">Proyecto: Nido de Agua</p>

          <p class="fs-5 fw-bold">Pago por suscripción</p>

          <div class="d-flex justify-content-between">
            <p class="fs-6 col-gray">inversión total:</p>
            <p class="fs-5 fw-bold">
              {{ formInversion.value.value | currency }}
            </p>
          </div>

          <div class="d-flex justify-content-between">
            <p class="fs-6 col-gray">Cuotas diferidas:</p>
            <p class="fs-5 fw-bold">
              {{ this.formInversion.value.dues | i18nPlural : mapCuotas }}
            </p>
          </div>

          <hr />

          <div class="d-flex justify-content-between mb-3">
            <p class="fs-6 col-gray">Subtotal:</p>
            <p class="fs-5 fw-bold">{{ subtotal | currency }}</p>
          </div>

          <p class="mt-3 mb-1 col-gray" *ngIf="formInversion.value.dues != 1">
            Proximo pago {{ fechaEnMes | date }}
          </p>

          <div class="d-flex justify-content-between">
            <p class="fs-6 col-gray">Impuestos y tarifas:</p>
            <p class="fs-5 fw-bold">{{ impuestosTarifas | currency }}</p>
          </div>
          <p class="col-gray">Fee tarjeta de crédito 2,5%</p>

          <hr />

          <div class="d-flex justify-content-between">
            <p class="fs-6">Total:</p>
            <p class="fs-5 fw-bold">{{ total | currency }}</p>
          </div>

          <p class = "text-muted">  El {{ getLastDayOfMonth() | date:'dd' }} de {{ getLastDayOfMonth() | date:'MMMM':'':'es-CO' }} el valor de Nido de Agua aumentará </p>

          <button mat-button type = "submit"
            class="btn bg-black rounded rounded-5 w-100 text-white pb-1 pt-1 mt-3"
            [ngClass] = "{'bg-dark': formInversion.valid, 'disabled': !formInversion.valid}">
            Continuar
          </button>
        </div>

        <p class="mt-3 col-gray">
          ¿Tienes alguna duda? Contáctanos a
          <a href="mailto:info@lokl.life" class="col-gray">info@lokl.life</a> o
          comunicate a nuestro canal de atención
        </p>
      </div>
    </div>
  </form>
</div>

<div class="p-5" *ngIf = "resolucion_movil">
  <form [formGroup]="formInversion">
    <div class = "row">
      <div class="col-12">
        <p class="fw-bold fs-3 font-black font-lato text-3x1">
          Empieza hoy mismo!
        </p>
      </div>
    </div>

    <div class = "row mt-3">
      <div class="col-12">
        <p class="text-muted fs-6 font-lato">
          Escoge tu mejor opción de pago e inicia tu camino como <br>
          inversionista en LOKL.
        </p>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-12">
        <label for="exampleInputEmail1" class="form-label text-muted">¿Cuánto quieres invertir?</label>
        <div class= "border input-group rounded-0" [ngClass] = "{'input-selected': inputActivated}">
          <input type="text" class="form-control form-control-lg rounded-0 border-0 col-10" formControlName="value" onlyNumber
            (focus)="inputFocus()" (blur) = "inputBlur()" (input)="calcularMontos()" placeholder="$0" />
          <div class = "d-flex justify-content-center input-group-append col-2" style = "border-left: 1px solid #f1f1f1!important">
            <div class="d-flex flex-column input-group-text border-0 align-center p-2" style = "background-color: transparent!important; ">
              <p class = "m-0 fw-heavy fs-7">
                {{currentUnits}}
              </p>
              <p class = "text-muted fs-8 m-0" style = "position: absolute; bottom: 4px">units</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class = "row">
      <div class = "col-12">
        <div class="d-flex justify-content-between mt-3 container-cuotas">
          <app-custom-select [data]="opcionesSelect"
            (onOpcionSeleccionada)="changeDues($event)"
            [$selectSelected]="$selectSelected"></app-custom-select>

          <div class="border pago-unico p-2 text-center align-items-center" [ngClass]="{
              'pago-unico-selected': pagoUnicoSelected
            }" (click)="clickPagoUnico()">
            <p class="fs-6 mb-0">Pago unico</p>
          </div>

        </div>
      </div>
    </div>

    <hr class = "mt-5 mb-4">

    <div class = "row p-5">
      <div class = "col-12">
        <p-carousel [value]="cardData" [numVisible]="cardsCount"  [circular]="false" [showIndicators]="false" [showNavigators]="false" #carouselP>
          <ng-template let-item pTemplate="item">
             <app-card [data] = "item" [resolucion_movil] = "resolucion_movil"></app-card>
          </ng-template>
        </p-carousel>

        <button class = "splide-arrow btn-izq" style = "background-color: transparent; width: 100px; left: -60px;" type = "button" (click) = "anteriorTarjeta()">
          <img src="/assets/icon/arrow-left.svg" alt="">
        </button>
        <button class = "splide-arrow btn-der" style = "background-color: transparent; width: 100px; right: -60px;" type = "button" (click) = "proximaTarjeta()">
          <img src="/assets/icon/arrow-rigth.svg" alt="">
        </button>
      </div>
    </div>
  </form>
</div>

<app-footer></app-footer>
