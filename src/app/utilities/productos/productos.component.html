<app-navbar></app-navbar>

<div>
  <div class="min-h-full" style="margin-bottom: 160px;">
    <div id="services" class="section relative pt-5 pb-8 md:pt-7 md:pb-0 bg-white flex-grow">
      <!-- Favs -->
      <div class="container xl:max-w-2xl md:max-w-2xl mx-auto px-4 mb-4" *ngIf="topfive.length>0">
        <span class="text-lg">Favoritos</span>
      </div>
      <div class="container xl:max-w-6xl mx-auto px-4 ">
        <div class="data-days-content">
          <div *ngFor="let data of topfive" (click)="clickFav(data)" class="flex-shrink px-2  wow fadeInUp "
            data-wow-duration="1s" style="visibility: visible; animation-duration: 1s; animation-name: fadeInUp;">
            <div
              class="flex justify-center items-center h-10 min-h-0  btn-accion border  rounded-2xl shadow-xl py-4 mb-6 bg-gray-50 border-b border-gray-100 transform transition duration-300 ease-in-out hover:-translate-y-2"
              style="width: 180px;">
              <h3 class="leading-normal font-semibold text-white text-[12px]" style="text-align: center;">
                {{data?.five.nombre}}</h3>
              <!-- <div class="">
              <p class="text-white">{{data?.five.descripcion}}</p>
            </div> -->
            </div>
          </div>
        </div>
      </div>

      <div class="container xl:max-w-2xl md:max-w-2xl mx-auto px-4">
        <div class="flex flex-wrap flex-row  text-center">
          <!-- ITERATION -->
          <label for="countries" class="block mb-2 text-sm font-medium text-gray-900">Seleccione un país</label>
          <select [(ngModel)]="paisSelected" (ngModelChange)="selectPais()" id="countries"
            class="select-opt bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
            <option [ngValue]="null" selected disabled>Seleccionar País</option>
            <option *ngFor="let country of paises" [ngValue]="country">{{country.PAIS_NOMBRE}}</option>
          </select>
        </div>

        <div class="flex flex-wrap flex-row text-center mt-6">
          <!-- ITERATION -->
          <label for="countries" class="block mb-2 text-sm font-medium text-gray-900">Seleccione un proveedor</label>
          <select [(ngModel)]="productoSelected" (ngModelChange)="selectProducto()" id="products"
            class="select-opt bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
            <option [ngValue]="null" selected disabled>Seleccionar Proveedor</option>
            <option *ngFor="let product of productos" [ngValue]="product">{{product.name}}</option>
          </select>
        </div>


      </div>

      <div class="container xl:max-w-8xl mx-auto px-4 mt-8" *ngIf="productoSelected?.productos">
        <!-- ITERATION -->
        <!-- <label for="countries" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400">Seleccione un producto</label> -->
        <!-- <select  [(ngModel)]="servicioSelected" (ngModelChange)="selectService()" id="services" class="select-opt bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
          <option [ngValue]="null" selected disabled>Seleccionar Producto</option>
          <option *ngFor="let service of productoSelected?.productos" [ngValue]="service">{{service.nombre}}</option>
        </select> -->

        <div class="data-days-content">
          <div *ngFor="let service of productoSelected?.productos" (click)="selectService(service)"
            class="flex-shrink px-2  wow fadeInUp " data-wow-duration="1s"
            style="visibility: visible; animation-duration: 1s; animation-name: fadeInUp;">
            <div
              class="flex justify-center items-center h-10 min-h-0  btn-accion border  rounded-2xl shadow-xl py-2 mb-2 bg-gray-50 border-b border-gray-100 transform transition duration-300 ease-in-out hover:-translate-y-2"
              [ngClass]="{activeService: servicioSelected?.id === service?.id}" style="width: 180px;">
              <h3 class="leading-normal font-semibold text-white text-[12px]" style="text-align: center;">
                {{service.nombre}}</h3>
              <!-- <div class="">
                <p class="text-white">{{data?.five.descripcion}}</p>
              </div> -->
            </div>
          </div>
        </div>
      </div>

      <div class="container xl:max-w-2xl md:max-w-2xl mx-auto px-4 w-full  space-y-8">
        <form [formGroup]="recargaForm" class="space-y-6">
          <input type="hidden" name="remember" value="true">
          <div *ngIf="div2" class="grid grid-cols-2">
            <div class="relative">
              <input [(ngModel)]="recarga.numero" formControlName="numero" type="text" maxlength="10" #inputTexto
                id="floating_outlined"
                class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                placeholder=" " />
              <label for="floating_outlined"
                class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2  origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">Número</label>
            </div>
            <div class="relative ml-4">
              <input [(ngModel)]="recarga.cantidad" (ngModelChange)="cantidadchange($event)" formControlName="cantidad"
                type="text" id="floating_outlined-2"
                class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                placeholder=" " />
              <label for="floating_outlined-2"
                class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2  origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">Valor</label>
            </div>
          </div>

          <div *ngIf="div3">
            <div class="grid grid-cols-1">
              <div class="relative mt-4">
                <input [(ngModel)]="recarga.serial" formControlName="serial" type="text" id="floating_outlined"
                  class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                  placeholder=" " />
                <label for="floating_outlined"
                  class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2  origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">{{tipo
                  !== 20? 'Serial':'Número SIM' }}</label>
              </div>
            </div>
            <div class="grid grid-cols-1">
              <div class="relative mt-4">
                <input [(ngModel)]="recarga.numero" formControlName="numero" type="text" id="floating_outlinedzi"
                  class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                  placeholder=" " maxlength="10" />
                <label for="floating_outlinedzi"
                  class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2  origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">{{tipo
                  !== 20? 'Número':'Zip Code' }}</label>
              </div>
            </div>
            <div class="grid grid-cols-1">

              <div *ngIf="tipo !== 20" class="relative mt-4">
                <input [(ngModel)]="recarga.cantidad" (ngModelChange)="cantidadchange($event)"
                  formControlName="cantidad" type="text" id="floating_outlined-2"
                  class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                  placeholder=" " />
                <label for="floating_outlined-2"
                  class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2  origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">Valor</label>
              </div>
              <div *ngIf="tipo === 20" class="relative mt-4">
                <input [(ngModel)]="recarga.email" formControlName="email" type="text" id="floating_outlined-2"
                  class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                  placeholder=" " />
                <label for="floating_outlined-2"
                  class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2  origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">Email</label>
              </div>
            </div>


          </div>
        </form>
        <div class="row">
          <div class="col-12 col-sm-12 col-md-12">
            <button type="submit"
              [disabled]="recargaForm.get('numero')?.value?.length != 10 || !recargaForm.get('cantidad')?.value"
              (click)="clickRecarga(recarga_numero)"
              class="nohover btn-accion group relative flex w-full justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
              Continuar
            </button>
          </div>
        </div>
      </div>


    </div>
  </div>

</div>

<div *ngIf="showModal"
  class="overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex">
  <div class="relative w-auto my-6 mx-auto max-w-3xl">
    <!--content-->
    <div style="min-width: 40vh !important"
      class="border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none">
      <!--header-->
      <div class="flex text-center  p-3 border-b border-solid border-slate-200 rounded-t">
        <h4 class="text-xl ml-5  font-semibold">
          Comprobante
        </h4>
        <button
          class="p-1 ml-auto bg-transparent border-0 text-black float-right text-xl leading-none font-semibold outline-none focus:outline-none"
          (click)="toggleModal()">
          x
        </button>
      </div>
      <!--body-->
      <div style="padding: 1.5rem; flex: 1 1 auto; position: relative;" class="relative p-6 flex-auto">
        <div class="zigzag" id="print-section">
          <div style="text-align:center; border-bottom: 1px solid silver;">
            <img style="width: auto;height: 4rem;margin-left: auto; margin-right: auto;"
              src="../../../assets/img/logo.png" alt="">
            <p style="font-size:20px;margin-bottom: 5px;margin-top:5px">{{response.nomcome}}</p>
            <p>{{response.telcome}}</p>
            <p style="margin-bottom: 12px;">{{response.fechrec | date: 'yyyy-MM-dd hh:mm:ss a'}}</p>
            <p *ngIf="tipo === 3" style="margin-bottom: 12px;"><b>Fecha exp:</b> {{response.fecexp | date:
              'yyyy-MM-dd'}}</p>
          </div>
          <div style="text-align:center">
            <p style="font-size:18px;margin-bottom: 5px;margin-top:8px">
              <b style="color: var(--itemColor);">{{response.numerorec}}</b> <ng-template [ngIf]="tipo !==3"> -
                {{response.prodrec}} </ng-template>
            </p>
          </div>
          <div style="padding:0px 14px 0px 14px; margin-top: 10px;">
            <table style="border-collapse:collapse;width: 100%;">
              <tbody>
                <tr>
                  <td>Cantidad:</td>
                  <td>{{response.valorrec | currency:'USD' }}</td>
                </tr>
                <tr>
                  <td>Impuestos:</td>
                  <td>{{response.ivurec | currency:'USD'}}</td>
                </tr>

                <tr *ngIf="incluirivu">
                  <td>Ivu:</td>
                  <td>{{ivu | currency:'USD'}}</td>
                </tr>
                <tr>
                  <td><b>Total:</b></td>
                  <td><b>{{totalResponse | currency:'USD' }}</b></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div style="padding:0px 14px 0px 14px; margin-top: 10px;margin-bottom: 36px;">
            <p style="float: left;text-align: left;">
              <i>Recharge id: </i>
              <i><b>{{response.idrec}}</b></i>
            </p>
            <!-- <p class="alignright"><i style="color: var(--ternaryColor);" ><b>{{response.idrec}}</b></i></p> -->
          </div>

          <div class="form-check ml-3 mt-5">
            <input (click)="changeCheck()" class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
            <label class="form-check-label" for="flexCheckChecked">
              Incluir IVU
            </label>
          </div>
          <ng-template [ngIf]="tipo===3">
            <div style="padding:0px 14px 0px 14px; margin-top: 10px">
              <p style="text-align: left;">
                <i>Serial: </i>
                <i><b>{{response.serial}}</b></i>
              </p>
            </div>
            <div style="padding:0px 14px 0px 14px; margin-top: 3px">
              <p style="text-align: left;">
                <i>Pin: </i>
                <i><b>{{response.pin}}</b></i>
              </p>
            </div>
          </ng-template>

        </div>
      </div>
      <!--footer-->
      <div class="row align-items-center">
        <div class="col-6 align-self-center text-center">
          <button (click)="shareUrl()" class="btn btn-success mb-0.5"><i class="fa-brands fa-whatsapp"></i></button>
        </div>
        <div class="col-6 justify-end items-center ">
          <div class="flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b">
            <button printTitle="Comprabante" printSectionId="print-section" ngxPrint
              class="bg-gray-900 text-white active:bg-gray-800 font-bold uppercase text-sm rounded px-5 py-2.5 shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
              type="button">
              Imprimir
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="showModal" class="opacity-25 fixed inset-0 z-40 bg-black"></div>


<ng-template #recarga_numero let-modal>
  <div class="modal-header">
    <div class="container">
      <h6 class="text-center">{{ 'ingrese su clave '| titlecase}}</h6>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="cerrarmodal()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>


  <div class="modal-body">

    <div class="row">
      <div class="col-12">
        <div class="">
          <h5 class="fs">Servicio Seleccionado</h5>
        </div>
        <div>
          <span>{{ servicioSelected.nombre }}
          </span>
        </div>

      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="">
          <h5 class="fs">Número</h5>
        </div>
        <div>
          <span>{{ recarga.numero}}
          </span>
        </div>

      </div>
    </div>


    <div class="row">
      <div class="col-12">
        <div class="">
          <h5 class="fs">Valor de recarga</h5>
        </div>
        <div>
          <span *ngIf="recarga.cantidad">{{ recarga.cantidad | currency:'USD'}}
          </span>
        </div>

      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div>
          <div><span class="fs">Cargo de servicio</span></div>
          <div><span class="">{{fee | currency:'USD'}}</span></div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div>
          <span class="fs">Valor total</span>
        </div>
        <div>
          <span class="">{{totalPagar | currency:'USD'
            }}</span>
        </div>

      </div>
    </div>
    <div class="w-full max-w-md space-y-8 mt-3">
      <form class="mt-1.5 space-y-6">
        <div class="relative">
          <input type="password" id="pass_outlined-2" [(ngModel)]="password" [ngModelOptions]="{standalone: true}"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
            placeholder=" " />
          <label for="pass_outlined-2"
            class="absolute text-sm text-gray-500 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1">Clave</label>
        </div>
      </form>
    </div>

  </div>

  <div class="modal-footer">

    <button [disabled]="!recargaForm.valid" type="submit" (click)="Recargar()"
      class="nohover md:max-w-xl btn-accion group relative flex w-full justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
      Continuar
    </button>

  </div>



</ng-template>

<!-- <input type="search" [ngModel]="paisSelected?.PAIS_NOMBRE" (ngModelChange)="setThresholds()"  class="form-control" placeholder="Search" id="listSearch" #search>
    <div *ngIf="Show" (clickOutside)="closeList1()" class="absolute w-fit py-1 mt-2 border border-1 border-neutral-400 rounded-md cursor-pointer">
      <div class="panel panel-default col-xs-12 col-sm-11" *ngFor="let lock of paises | filter:'PAIS_NOMBRE': search.value">
        <input type="checkbox"  class="check" id="{{lock.PAIS_ID}}">
        <label [for]="lock.PAIS_ID" class="check-label"></label>
        <h3 class="card-text name">{{lock.PAIS_NOMBRE}}</h3>

        <div class="py-2 px-4 w-full hover:bg-neutral-100">
          {{lock.PAIS_NOMBRE}}
        </div>
    </div>
</div> -->